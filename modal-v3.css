/**
 * ============================================================================
 * MODAL V3 - Design System & Styles
 * ============================================================================
 *
 * Architecture:
 * 1. Design Tokens (Variables CSS)
 * 2. Reset & Base Styles
 * 3. Modal Container & Backdrop
 * 4. Modal Content & Layout
 * 5. Modal Modules (Header, Body, Footer)
 * 6. Biography & Delegates
 * 7. States & Interactions
 * 8. Responsive Design
 * 9. Accessibility (Reduced Motion, High Contrast)
 *
 * @version 3.0.0
 */

/* ============================================================================
   1. DESIGN TOKENS - Variables CSS
   ============================================================================ */

:root {
    /* ===== Couleurs principales ===== */
    --modal-color-primary: #1E3A8A;
    --modal-color-primary-light: #3B82F6;
    --modal-color-primary-dark: #1E293B;
    --modal-color-text: #1F2937;
    --modal-color-text-light: #6B7280;
    --modal-color-text-muted: #9CA3AF;
    --modal-color-background: #FFFFFF;
    --modal-color-background-alt: #F9FAFB;
    --modal-color-border: #E5E7EB;
    --modal-color-border-light: #F3F4F6;
    --modal-color-backdrop: rgba(0, 0, 0, 0.75);
    --modal-color-overlay: rgba(255, 255, 255, 0.95);

    /* États */
    --modal-color-success: #10B981;
    --modal-color-warning: #F59E0B;
    --modal-color-error: #EF4444;
    --modal-color-info: #3B82F6;

    /* Focus */
    --modal-color-focus: #3B82F6;
    --modal-color-focus-ring: rgba(59, 130, 246, 0.5);

    /* ===== Espacements (échelle 8px) ===== */
    --modal-spacing-1: 0.5rem;   /* 8px */
    --modal-spacing-2: 1rem;     /* 16px */
    --modal-spacing-3: 1.5rem;   /* 24px */
    --modal-spacing-4: 2rem;     /* 32px */
    --modal-spacing-5: 2.5rem;   /* 40px */
    --modal-spacing-6: 3rem;     /* 48px */
    --modal-spacing-8: 4rem;     /* 64px */
    --modal-spacing-10: 5rem;    /* 80px */
    --modal-spacing-12: 6rem;    /* 96px */

    /* ===== Typographie ===== */
    --modal-font-family: 'Space Grotesk', system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
    --modal-font-size-xs: 0.75rem;    /* 12px */
    --modal-font-size-sm: 0.875rem;   /* 14px */
    --modal-font-size-base: 1rem;     /* 16px */
    --modal-font-size-lg: 1.125rem;   /* 18px */
    --modal-font-size-xl: 1.25rem;    /* 20px */
    --modal-font-size-2xl: 1.5rem;    /* 24px */
    --modal-font-size-3xl: 1.875rem;  /* 30px */
    --modal-font-size-4xl: 2.25rem;   /* 36px */

    --modal-font-weight-light: 300;
    --modal-font-weight-normal: 400;
    --modal-font-weight-medium: 500;
    --modal-font-weight-semibold: 600;
    --modal-font-weight-bold: 700;

    --modal-line-height-tight: 1.25;
    --modal-line-height-snug: 1.375;
    --modal-line-height-normal: 1.5;
    --modal-line-height-relaxed: 1.625;
    --modal-line-height-loose: 2;

    /* ===== Ombres (4 niveaux) ===== */
    --modal-shadow-sm: 0 1px 2px rgba(0, 0, 0, 0.05);
    --modal-shadow-md: 0 4px 6px rgba(0, 0, 0, 0.1);
    --modal-shadow-lg: 0 10px 15px rgba(0, 0, 0, 0.1), 0 4px 6px rgba(0, 0, 0, 0.05);
    --modal-shadow-xl: 0 20px 25px rgba(0, 0, 0, 0.15), 0 10px 10px rgba(0, 0, 0, 0.04);
    --modal-shadow-2xl: 0 25px 50px rgba(0, 0, 0, 0.25);

    /* ===== Border Radius ===== */
    --modal-radius-sm: 0.25rem;  /* 4px */
    --modal-radius-md: 0.5rem;   /* 8px */
    --modal-radius-lg: 0.75rem;  /* 12px */
    --modal-radius-xl: 1rem;     /* 16px */
    --modal-radius-2xl: 1.5rem;  /* 24px */
    --modal-radius-full: 9999px;

    /* ===== Animations ===== */
    --modal-transition-fast: 150ms cubic-bezier(0.4, 0, 0.2, 1);
    --modal-transition-base: 200ms cubic-bezier(0.4, 0, 0.2, 1);
    --modal-transition-slow: 300ms cubic-bezier(0.4, 0, 0.2, 1);
    --modal-transition-slower: 500ms cubic-bezier(0.4, 0, 0.2, 1);

    /* ===== Z-index ===== */
    --modal-z-backdrop: 1000;
    --modal-z-content: 1001;
    --modal-z-close: 1002;

    /* ===== Dimensions ===== */
    --modal-max-width-sm: 28rem;   /* 448px */
    --modal-max-width-md: 32rem;   /* 512px */
    --modal-max-width-lg: 48rem;   /* 768px */
    --modal-max-width-xl: 56rem;   /* 896px */
    --modal-max-width-2xl: 64rem;  /* 1024px */
}

/* ============================================================================
   2. RESET & BASE STYLES
   ============================================================================ */

.modal *,
.modal *::before,
.modal *::after {
    box-sizing: border-box;
}

/* ============================================================================
   3. MODAL CONTAINER & BACKDROP
   ============================================================================ */

.modal {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    z-index: var(--modal-z-backdrop);
    display: flex;
    align-items: center;
    justify-content: center;
    padding: var(--modal-spacing-4);
    font-family: var(--modal-font-family);
    overflow-y: auto;
    -webkit-overflow-scrolling: touch;

    /* Transitions */
    opacity: 0;
    visibility: hidden;
    transition: opacity var(--modal-transition-base),
                visibility var(--modal-transition-base);
}

/* État ouvert */
.modal:not([hidden]) {
    opacity: 1;
    visibility: visible;
}

.modal[data-state="opening"],
.modal[data-state="open"],
.modal[data-state="loading"] {
    opacity: 1;
    visibility: visible;
}

.modal[data-state="closing"],
.modal[data-state="closed"] {
    opacity: 0;
    visibility: hidden;
}

/* Backdrop */
.modal-backdrop {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: var(--modal-color-backdrop);
    z-index: var(--modal-z-backdrop);
    cursor: pointer;
    transition: opacity var(--modal-transition-base);
}

/* ============================================================================
   4. MODAL CONTENT & LAYOUT
   ============================================================================ */

.modal-content {
    position: relative;
    background: var(--modal-color-background);
    border-radius: var(--modal-radius-2xl);
    box-shadow: var(--modal-shadow-2xl);
    width: 100%;
    max-width: var(--modal-max-width-2xl);
    max-height: 90vh;
    overflow-y: auto;
    z-index: var(--modal-z-content);

    /* Animation d'entrée */
    transform: scale(0.95) translateY(1rem);
    transition: transform var(--modal-transition-base),
                opacity var(--modal-transition-base);
}

.modal:not([hidden]) .modal-content,
.modal[data-state="open"] .modal-content,
.modal[data-state="loading"] .modal-content {
    transform: scale(1) translateY(0);
    opacity: 1;
}

.modal[data-state="closing"] .modal-content,
.modal[data-state="closed"] .modal-content {
    transform: scale(0.95) translateY(1rem);
    opacity: 0;
}

/* État de chargement */
.modal-content[aria-busy="true"]::after {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: var(--modal-color-overlay);
    z-index: 10;
    display: flex;
    align-items: center;
    justify-content: center;
    backdrop-filter: blur(2px);
}

/* ============================================================================
   5. MODAL CLOSE BUTTON
   ============================================================================ */

.modal-close {
    position: absolute;
    top: var(--modal-spacing-3);
    right: var(--modal-spacing-3);
    width: 2.5rem;
    height: 2.5rem;
    display: flex;
    align-items: center;
    justify-content: center;
    background: transparent;
    border: none;
    border-radius: var(--modal-radius-full);
    color: var(--modal-color-text-light);
    font-size: var(--modal-font-size-2xl);
    line-height: 1;
    cursor: pointer;
    z-index: var(--modal-z-close);
    transition: background var(--modal-transition-fast),
                color var(--modal-transition-fast),
                transform var(--modal-transition-fast);
}

.modal-close:hover {
    background: var(--modal-color-background-alt);
    color: var(--modal-color-text);
    transform: scale(1.05);
}

.modal-close:focus {
    outline: 2px solid var(--modal-color-focus);
    outline-offset: 2px;
}

.modal-close:active {
    transform: scale(0.95);
}

/* ============================================================================
   6. MODAL BODY & LAYOUT
   ============================================================================ */

.modal-body {
    padding: var(--modal-spacing-6);
}

.modal-layout {
    display: grid;
    gap: var(--modal-spacing-4);
    grid-template-columns: 1fr;
}

/* ============================================================================
   7. MODAL MODULES
   ============================================================================ */

.modal-module {
    padding: var(--modal-spacing-3);
    border-radius: var(--modal-radius-lg);
}

.modal-module-title {
    font-size: var(--modal-font-size-lg);
    font-weight: var(--modal-font-weight-semibold);
    color: var(--modal-color-text);
    margin: 0 0 var(--modal-spacing-2);
    line-height: var(--modal-line-height-tight);
}

/* Photo Module */
.modal-module--photo {
    padding: 0;
}

.modal-photo-frame {
    width: 100%;
    aspect-ratio: 1 / 1;
    border-radius: var(--modal-radius-xl);
    overflow: hidden;
    background: var(--modal-color-background-alt);
}

.modal-photo {
    width: 100%;
    height: 100%;
    object-fit: cover;
    display: block;
}

/* Identity Module */
.modal-module--identity {
    text-align: center;
}

.modal-identity-title {
    font-size: var(--modal-font-size-3xl);
    font-weight: var(--modal-font-weight-bold);
    color: var(--modal-color-text);
    margin: 0 0 var(--modal-spacing-1);
    line-height: var(--modal-line-height-tight);
}

.modal-portfolio {
    font-size: var(--modal-font-size-lg);
    font-weight: var(--modal-font-weight-medium);
    color: var(--modal-color-primary);
    margin: 0;
    line-height: var(--modal-line-height-snug);
}

/* Description Module */
.modal-module--description {
    background: var(--modal-color-background-alt);
}

.modal-description {
    font-size: var(--modal-font-size-base);
    line-height: var(--modal-line-height-relaxed);
    color: var(--modal-color-text);
    margin: 0;
}

/* ============================================================================
   8. BIOGRAPHY MODULE
   ============================================================================ */

.modal-module--biography {
    background: var(--modal-color-background);
    border: 1px solid var(--modal-color-border-light);
}

.biography-groups {
    display: flex;
    flex-direction: column;
    gap: var(--modal-spacing-4);
}

.biography-group {
    display: flex;
    flex-direction: column;
    gap: var(--modal-spacing-2);
}

.biography-group-title {
    font-size: var(--modal-font-size-base);
    font-weight: var(--modal-font-weight-semibold);
    color: var(--modal-color-primary-dark);
    margin: 0;
    text-transform: uppercase;
    letter-spacing: 0.05em;
    font-size: var(--modal-font-size-sm);
}

.biography-list {
    list-style: none;
    margin: 0;
    padding: 0;
    display: flex;
    flex-direction: column;
    gap: var(--modal-spacing-2);
}

.biography-item {
    font-size: var(--modal-font-size-sm);
    line-height: var(--modal-line-height-relaxed);
    color: var(--modal-color-text);
    padding-left: var(--modal-spacing-3);
    position: relative;
}

.biography-item::before {
    content: '•';
    position: absolute;
    left: 0;
    color: var(--modal-color-primary);
    font-weight: var(--modal-font-weight-bold);
}

.biography-item-title {
    font-weight: var(--modal-font-weight-semibold);
    color: var(--modal-color-text);
}

.biography-item-org {
    color: var(--modal-color-text-light);
}

.biography-item-period {
    color: var(--modal-color-text-muted);
    font-size: var(--modal-font-size-xs);
}

/* ============================================================================
   9. DELEGATES MODULE
   ============================================================================ */

.modal-module--delegates {
    background: var(--modal-color-background);
    border: 1px solid var(--modal-color-border-light);
}

.modal-delegates-list {
    display: flex;
    flex-direction: column;
    gap: var(--modal-spacing-2);
}

.delegate-card {
    display: flex;
    align-items: center;
    justify-content: space-between;
    gap: var(--modal-spacing-3);
    padding: var(--modal-spacing-3);
    background: var(--modal-color-background);
    border: 1px solid var(--modal-color-border);
    border-radius: var(--modal-radius-md);
    cursor: pointer;
    transition: all var(--modal-transition-fast);
}

.delegate-card:hover {
    background: var(--modal-color-background-alt);
    border-color: var(--modal-color-primary-light);
    transform: translateY(-2px);
    box-shadow: var(--modal-shadow-md);
}

.delegate-card:focus {
    outline: 2px solid var(--modal-color-focus);
    outline-offset: 2px;
}

.delegate-card:active {
    transform: translateY(0);
}

.delegate-info {
    flex: 1;
    display: flex;
    flex-direction: column;
    gap: var(--modal-spacing-1);
}

.delegate-name {
    font-size: var(--modal-font-size-base);
    font-weight: var(--modal-font-weight-semibold);
    color: var(--modal-color-text);
    margin: 0;
    line-height: var(--modal-line-height-tight);
}

.delegate-role {
    font-size: var(--modal-font-size-sm);
    color: var(--modal-color-text-light);
    margin: 0;
    line-height: var(--modal-line-height-normal);
}

/* ============================================================================
   10. MODAL FOOTER
   ============================================================================ */

.modal-module--footer {
    background: var(--modal-color-background-alt);
    text-align: center;
    padding: var(--modal-spacing-4);
}

.modal-footer-cta {
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: var(--modal-spacing-2);
}

.modal-footer-logo {
    width: 120px;
    height: auto;
    opacity: 0.6;
    transition: opacity var(--modal-transition-fast);
}

.modal-footer-logo:hover {
    opacity: 1;
}

/* ============================================================================
   11. RESPONSIVE DESIGN
   ============================================================================ */

/* Mobile (default - déjà défini ci-dessus) */

/* Tablet (768px+) */
@media (min-width: 768px) {
    .modal {
        padding: var(--modal-spacing-6);
    }

    .modal-content {
        max-height: 85vh;
    }

    .modal-body {
        padding: var(--modal-spacing-8);
    }

    .modal-layout {
        grid-template-columns: 200px 1fr;
        gap: var(--modal-spacing-6);
    }

    .modal-module--photo {
        grid-column: 1;
        grid-row: 1 / 3;
    }

    .modal-module--identity {
        grid-column: 2;
        grid-row: 1;
        text-align: left;
    }

    .modal-module--description {
        grid-column: 1 / -1;
    }

    .modal-identity-title {
        font-size: var(--modal-font-size-4xl);
    }

    .modal-portfolio {
        font-size: var(--modal-font-size-xl);
    }
}

/* Desktop (920px+) */
@media (min-width: 920px) {
    .modal-content {
        max-width: var(--modal-max-width-2xl);
    }

    .modal-layout {
        grid-template-columns: 250px 1fr;
    }
}

/* Large Desktop (1280px+) */
@media (min-width: 1280px) {
    .modal-layout {
        grid-template-columns: 300px 1fr;
    }
}

/* ============================================================================
   12. ACCESSIBILITY - Reduced Motion
   ============================================================================ */

@media (prefers-reduced-motion: reduce) {
    *,
    *::before,
    *::after {
        animation-duration: 0.01ms !important;
        animation-iteration-count: 1 !important;
        transition-duration: 0.01ms !important;
        scroll-behavior: auto !important;
    }

    .modal-content {
        transform: none !important;
        transition: opacity var(--modal-transition-fast);
    }
}

/* ============================================================================
   13. ACCESSIBILITY - High Contrast Mode
   ============================================================================ */

@media (prefers-contrast: high) {
    .modal-content {
        border: 2px solid var(--modal-color-text);
    }

    .modal-close {
        border: 2px solid currentColor;
    }

    .delegate-card {
        border-width: 2px;
    }

    .biography-item::before {
        font-weight: var(--modal-font-weight-bold);
    }
}

/* ============================================================================
   14. PRINT STYLES
   ============================================================================ */

@media print {
    .modal {
        position: static;
        padding: 0;
        background: white;
    }

    .modal-backdrop {
        display: none;
    }

    .modal-close {
        display: none;
    }

    .modal-content {
        box-shadow: none;
        max-height: none;
        max-width: none;
    }

    .delegate-card {
        page-break-inside: avoid;
    }
}

/* ============================================================================
   15. DARK MODE SUPPORT (préparation future)
   ============================================================================ */

@media (prefers-color-scheme: dark) {
    :root {
        --modal-color-background: #1F2937;
        --modal-color-background-alt: #111827;
        --modal-color-text: #F9FAFB;
        --modal-color-text-light: #D1D5DB;
        --modal-color-text-muted: #9CA3AF;
        --modal-color-border: #374151;
        --modal-color-border-light: #4B5563;
        --modal-color-backdrop: rgba(0, 0, 0, 0.9);
    }

    .modal-photo-frame {
        background: #374151;
    }
}

/* ============================================================================
   16. UTILITY CLASSES
   ============================================================================ */

.modal [hidden] {
    display: none !important;
}

.modal .sr-only {
    position: absolute;
    width: 1px;
    height: 1px;
    padding: 0;
    margin: -1px;
    overflow: hidden;
    clip: rect(0, 0, 0, 0);
    white-space: nowrap;
    border-width: 0;
}
